<!-- BEGIN PAGE HEADER-->
<div class="row">
  <div class="col-md-12">
    <!-- BEGIN PAGE TITLE & BREADCRUMB-->
    <h3
      class="page-title"
      *ngIf="this.getToken('Role') === 'DM' || this.getToken('Role') === 'DMM'"
    >
      {{ "EVISASEARCH.eVisa Approval Processing" | translate }}
    </h3>
    <h3
      class="page-title"
      *ngIf="
        this.getToken('Role') === 'BCO' || this.getToken('Role') === 'SBCO'
      "
    >
      {{ "EVISASEARCH.eVisa Arrival Processing" | translate }}
    </h3>
    <ul class="page-breadcrumb breadcrumb">
      <li>
        <i class="fa fa-home"></i>
        <a
          href="javascript:;"
          *ngIf="this.getToken('Role') != 'DMM'"
          [routerLink]="['/main/dashboard']"
          >{{ "COMMON.Home" | translate }}</a
        >
        <a
          href="javascript:;"
          *ngIf="this.getToken('Role') === 'DMM'"
          [routerLink]="['/main/dashboardimo']"
          >{{ "COMMON.Home" | translate }}</a
        >
        <i class="fa fa-angle-right"></i>
      </li>
      <li>
        {{ "EVISASEARCH.eVisa" | translate }}<i class="fa fa-angle-right"></i>
      </li>
      <li>{{ "EVISASEARCH.Processing" | translate }}</li>
    </ul>
    <!-- END PAGE TITLE & BREADCRUMB-->
  </div>
</div>

<div class="row" id="visaDetails">
  <div class="col-md-12">
    <div class="portlet box light-grey">
      <div class="row">
        <div class="col-md-3" style="cursor: pointer">
          <button class="btn btn-cont" (click)="getNextSetOfFiles()">
            <i class="fa fa-arrow-down"></i
            ><b>{{ "DASHBOARD.GetNextSetofFiles" | translate }}</b>
          </button>
        </div>
      </div>
    </div>
    <div class="portlet box blue">
      <div class="portlet-title">
        <div class="caption">
          <i class="fa fa-cogs"></i>{{ "EVISASEARCH.Visa Details" | translate }}
        </div>
        <div class="tools"></div>
      </div>
      <div class="portlet-body">
        <div class="booking-search">
          <form
            class="form-horizontal"
            #visaDetailForm="ngForm"
            (ngSubmit)="applyFilter()"
          >
            <div class="row form-group">
              <div class="col-md-4">
                <label class="control-label">{{
                  "EVISASEARCH.File Number" | translate
                }}</label>
                <div class="input-icon">
                  <i class="fa fa-map-marker"></i>
                  <input
                    class="form-control text"
                    autocomplete="off"
                    type="text"
                    name="fileNumber"
                    [(ngModel)]="filterObj.fileNumber"
                    placeholder="{{ 'EVISASEARCH.File Number' | translate }}"
                    id="fileNumber"
                    #fileNumber="ngModel"
                    (keyup)="spaceTrim($event)"
                  />
                </div>
              </div>

              <div class="col-md-4">
                <label class="control-label">{{
                  "EVISASEARCH.Is Express Visa" | translate
                }}</label>
                <div class="input-icon">
                  <i class="fa fa-envelope"></i>
                  <ng-select
                    [items]="visaStatus"
                    class="chosen-select"
                    placeholder="{{
                      'EVISASEARCH.Is Express Visa' | translate
                    }}"
                    [clearable]="true"
                    [searchable]="false"
                    [(ngModel)]="filterObj.expressVisa"
                    bindLabel="name"
                    bindValue="code"
                    [dropdownPosition]="'auto'"
                    name="expressVisa"
                    #expressVisa="ngModel"
                    required
                  >
                  </ng-select>
                </div>
              </div>
              <div class="col-md-4">
                <label class="control-label">{{
                  "EVISASEARCH.Status" | translate
                }}</label>
                <div class="input-icon">
                  <i class="fa fa-envelope"></i>
                  <ng-select
                    [items]="statusDetails"
                    class="chosen-select"
                    placeholder="{{ 'EVISASEARCH.Status' | translate }}"
                    [clearable]="false"
                    [searchable]="false"
                    [(ngModel)]="filterObj.docStatus"
                    bindLabel="description"
                    bindValue="code"
                    [dropdownPosition]="'auto'"
                    name="docStatus"
                    #docStatus="ngModel"
                    required
                  >
                  </ng-select>
                </div>
              </div>
            </div>

            <div class="row form-group">
              <div class="col-md-4">
                <button
                  type="button"
                  class="btn pull-left"
                  (click)="resetFilter()"
                >
                  {{ "COMMON.ResetFilter" | translate }}</button
                >&nbsp;&nbsp;
                <button class="btn blue" type="submit">
                  {{ "EVISASEARCH.SEARCH" | translate }}
                  <i class="m-icon-swapright m-icon-white"></i>
                </button>
                &nbsp; &nbsp;
              </div>
            </div>
          </form>
        </div>

        <div class="table-scrollable">
          <table
            class="table table-striped table-bordered table-hover"
            id="sample_editable_1"
          >
            <thead>
              <tr>
                <th
                  scope="col"
                  [appSort]="Applications"
                  data-order="desc"
                  data-name="fileNumber"
                  style="cursor: pointer"
                >
                  {{ "EVISASEARCH.File Number" | translate }} &nbsp;<i
                    class="fa fa-sort"
                  ></i>
                </th>
                <!-- <th>{{'LOGIN.Username'|translate}}</th> -->
                <th>{{ "EVISASEARCH.Is Express Visa" | translate }}</th>
                <th>{{ "EVISASEARCH.Status" | translate }}</th>

                <!-- <th scope="col" [appSort]="Applications" data-order="desc" data-name="submittedDate"
                                    data-type="date" style="cursor: pointer;">{{'EVISASEARCH.Date & Time
                                    Submitted'|translate}} &nbsp;<i class="fa fa-sort"></i></th>
                                <th>{{'EVISASEARCH.Status'|translate}}</th>
                                <th>Allocated Date</th> -->
              </tr>
            </thead>
            <tbody>
              <tr class="odd gradeX" *ngFor="let data of Applications">
                <td>
                  <a
                    href="javascript:;"
                    (click)="clickApp(data?.fileNumber)"
                    [routerLink]="['/main/evisasearch']"
                    >{{ data?.fileNumber }}</a
                  >
                </td>
                <td>{{ data?.expressVisa === true ? 'OUI' : 'NON' }}</td>
                <!-- <td>{{data?.username}}</td> -->
                <td *ngIf="data?.documentStatus === 'SUB'">
                  <span class="label label-sm label-success" style="font-weight: bold;"
                    >Allocation en attente</span
                  >
                </td>
                <td *ngIf="data?.documentStatus === 'PEN'">
                  <span class="label label-sm label-info" style="font-weight: bold; background-color: #53354a"
                    >En attente d'approbation</span
                  >
                </td>
                <td *ngIf="data?.documentStatus === 'CLS'">
                  <span class="label label-sm label-info" style="font-weight: bold;">Dossier Trait√©(s)</span>
                </td>
                <td *ngIf="data?.documentStatus === 'VAL'">
                  <span class="label label-sm label-default" style="font-weight: bold; background-color: #f08a5d"
                    >En attente de validation</span
                  >
                </td>
                <td *ngIf="data?.documentStatus === 'DRA'">
                  <span class="label label-sm label-info" style="font-weight: bold;">Brouillon</span>
                </td>
                <!-- <td>{{data?.submittedDate | date:'dd-MM-yyyy'}}</td>
                                <td *ngIf="data?.documentStatus === 'SUB'"><span
                                        class="label label-sm label-success">Pending Allocation</span></td>
                                <td *ngIf="data?.documentStatus === 'PEN'"><span
                                        class="label label-sm label-info">Pending Approval</span></td>
                                <td *ngIf="data?.documentStatus === 'CLS'"><span
                                        class="label label-sm label-info">Closed</span></td>
                                <td *ngIf="data?.documentStatus==='VAL'"><span
                                        class="label label-sm label-default">Pending Validation</span></td>
                                <td *ngIf="data?.documentStatus==='DRA'"><span
                                        class="label label-sm label-info">Draft</span></td>

                                <td></td> -->
              </tr>
              <!-- <tr class="odd">
                                <td style="text-align: center" colspan="10" class="dataTables_empty"><b>
                                        {{'RECORDS.NoRecords'|translate}}</b></td>
                            </tr> -->
            </tbody>
          </table>
        </div>
        <div class="row" *ngIf="totalElements > 0">
          <div class="col-md-4 col-sm-12">
            <div class="btn-group">
              <ng-select
                (change)="rangeChanged(pagesize)"
                [items]="rangeList"
                bindLabel="name"
                bindValue="id"
                placeholder="Select"
                [(ngModel)]="pagesize"
                [ngModelOptions]="{ standalone: true }"
                [clearable]="false"
                [searchable]="false"
                [dropdownPosition]="'top'"
              >
              </ng-select>
            </div>
          </div>
          <div class="col-md-4 col-sm-12">
            <div class="dataTables_info" id="sample_editable_1_info">
              {{ "PAGINATION.Showing" | translate }} {{ number * size + 1 }}
              {{ "PAGINATION.to" | translate }}
              {{ number * size + noofelements }}
              {{ "PAGINATION.of" | translate }} {{ totalElements }}
              {{ "PAGINATION.entries" | translate }}
            </div>
          </div>
          <div class="col-md-4 col-sm-12">
            <div class="dataTables_paginate paging_bootstrap">
              <pagination
                class="page"
                [boundaryLinks]="showBoundaryLinks"
                [rotate]="'true'"
                [itemsPerPage]="pagesize"
                name="currentPage"
                ngDefaultControl
                [totalItems]="totalItem"
                [maxSize]="5"
                [(ngModel)]="currentPage"
                [ngModelOptions]="{ standalone: true }"
                (pageChanged)="pageChanged($event)"
                previousText="&lsaquo;"
                nextText="&rsaquo;"
                firstText="&laquo;"
                lastText="&raquo;"
              >
              </pagination>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ngx-ui-loader hasProgressBar="false" fgsType="three-strings"></ngx-ui-loader>
