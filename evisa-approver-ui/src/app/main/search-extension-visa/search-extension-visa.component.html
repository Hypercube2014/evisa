<div class="row">
    <div class="col-md-12">
        <!-- BEGIN PAGE TITLE & BREADCRUMB-->
        <h3 class="page-title" *ngIf="this.getToken('Role')==='DM'||this.getToken('Role')==='DMM'">
            Extension {{'EVISASEARCH.extensionApprovalProcessing'|translate}}
        </h3>
        <ul class="page-breadcrumb breadcrumb">
            <li>
                <i class="fa fa-home"></i>
                <a href="javascript:;" [routerLink]="['/main/dashboard']">{{'COMMON.Home'|translate}}</a>
                <i class="fa fa-angle-right"></i>
            </li>
            <li>{{'EVISASEARCH.extensioneVisa'|translate}}<i class="fa fa-angle-right"></i></li>
            <li>{{'EVISASEARCH.Processing'|translate}}</li>
        </ul>
        <!-- END PAGE TITLE & BREADCRUMB-->
    </div>
</div>


<div class="row" id="visaDetails">
    <div class="col-md-12">
        <div class="portlet box light-grey">
            <div class="row">
                <div class="col-md-3" style="cursor: pointer;">
                    <button class="btn btn-cont" (click)='nextSetOfExtensions()'><i class="fa fa-arrow-down "></i> <b>{{'DASHBOARD.GetNextSetofFiles'|translate}} </b></button>
                </div>
            </div>
        </div>
        <div class="portlet box blue">
            <div class="portlet-title">
                <div class="caption"><i class="fa fa-cogs"></i>{{'EVISASEARCH.Visa Details'|translate}}</div>
                <div class="tools">
                </div>
            </div>
            <div class="portlet-body">
                <div class="booking-search">
                    <form class="form-horizontal" #visaDetailForm="ngForm" (ngSubmit)='applyFilter()'>
                        <div class="row form-group">
                            <div class="col-md-4">
                                <label class="control-label">{{'EVISASEARCH.Application Number'|translate}}</label>
                                <div class="input-icon">
                                    <i class="fa fa-map-marker"></i>
                                    <input class='form-control text' autocomplete="off" type="text"
                                        name="applicationNumber" [(ngModel)]="filterObj.applicationNumber"
                                        placeholder="{{'EVISASEARCH.Application Number'|translate}}"
                                        id="applicationNumber" #applicationNumber="ngModel"
                                        (keyup)="spaceTrim($event)" />
                                </div>
                            </div>
                            <!-- <div class="col-md-4">
                                <label class="control-label">{{'EVISASEARCH.Visa Extension Number'|translate}}</label>
                                <div class="input-icon">
                                    <i class="fa fa-map-marker"></i>
                                    <input class='form-control text' autocomplete="off" type="text"
                                        name="extensionId" [(ngModel)]="filterObj.extensionId"
                                        placeholder="{{'EVISASEARCH.Visa Extension Number'|translate}}"
                                        id="extensionId" #extensionId="ngModel"
                                        (keyup)="spaceTrim($event)" />
                                </div>
                            </div> -->

                            <div class="col-md-4">
                                <label class="control-label">{{'EVISASEARCH.Status'|translate}}</label>
                                <div class="input-icon">
                                    <i class="fa fa-envelope"></i>
                                    <ng-select [items]="status" class="chosen-select"
                                        placeholder="{{'EVISASEARCH.Status'|translate}}" [clearable]='true'
                                        [searchable]='false' [(ngModel)]="filterObj.documentStatus"
                                        bindLabel="description" bindValue="code" [dropdownPosition]="'auto'"
                                        name="documentStatus" #documentStatus="ngModel" required>
                                    </ng-select>
                                </div>
                            </div>


                        </div>

                        <div class="row form-group">
                            <div class="col-md-4">
                                <button type="button" *ngIf="isFilterApplied" class="btn pull-left"
                                    (click)="resetFilter()">{{'COMMON.ResetFilter'|translate}}</button>
                                &nbsp;&nbsp;
                                <button class="btn blue" type="submit">{{'EVISASEARCH.SEARCH'|translate}} <i
                                        class="m-icon-swapright m-icon-white"></i></button> &nbsp; &nbsp;
                            </div>
                            <!--<div *ngIf="this.getToken('Role')=='DM'" class="col-lg-3 col-md-3 col-sm-6 col-xs-12"
                                style="cursor: pointer;">
                                <div class="dashboard-stat purple" (click)="nextSetOfExtensions()">
                                    <div class="visual">
                                        <i class="fa fa-briefcase"></i>
                                    </div>
                                    <div class="details" style="text-indent:3%">

                                        <div class="desc">Get Next Set of Extension Files</div>
                                    </div>

                                </div>
                            </div>-->
                        </div>
                    </form>
                </div>


                <div class="table-scrollable" *ngIf=result>
                    <table class="table table-striped table-bordered table-hover" id="sample_editable_1">
                        <thead>
                            <tr>
                                <th scope="col" [appSort]="evisaExtension" data-order="desc" data-name="visaExtensionId"
                                    style="cursor: pointer;">{{'EVISASEARCH.Visa Extension Number'|translate}}
                                    &nbsp;<i class="fa fa-sort"></i></th>


                                <th scope="col" [appSort]="evisaExtension" data-order="desc"
                                    data-name="applicationNumber" style="cursor: pointer;"> {{'EVISASEARCH.ApplicationNo'|translate}} &nbsp;<i class="fa fa-sort"></i></th>


                                <th>{{'EVISASEARCH.Username'|translate}}</th>
                                <th> {{'EVISASEARCH.Days of Extension'|translate}} </th>
                                <th>{{'EVISASEARCH.Total Amount'|translate}}</th>
                                <th>{{'EVISASEARCH.Status'|translate}}</th>
                                <th>{{'EVISASEARCH.Extension Status'|translate}}</th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr class="odd gradeX" *ngFor="let data of evisaExtension">
                                <td>
                                    <a href='javascript:;' (click)="clickApp(data?.documentStatus)"
                                       [routerLink]="['/main/extensionevisaprocess',data.visaExtensionId, data.applicationNumber]">
                                         {{data?.visaExtensionId}}</a>

                                </td>

                                <td> {{data?.applicationNumber}}</td>
                                <td>{{data?.username}}</td>
                                <td>{{data?.daysOfExtension}}</td>
                                <td>{{data?.totalAmount}}</td>

                                <td *ngIf="data?.documentStatus === 'SUB'"><span
                                        class="label label-sm label-success">Pending Allocation</span></td>
                                <td *ngIf="data?.documentStatus === 'PEN'"><span
                                        class="label label-sm label-info">Pending Approval</span></td>
                                <td *ngIf="data?.documentStatus === 'CLS'"><span
                                        class="label label-sm label-info">Closed</span></td>
                                <td *ngIf="data?.documentStatus==='VAL'"><span
                                        class="label label-sm label-default">Pending Validation</span></td>
                                <td *ngIf="data?.documentStatus==='DRA'"><span
                                        class="label label-sm label-info">Draft</span></td>


                                <td *ngIf="data?.extensionStatus==='APR'"><span
                                        class="label label-sm label-success">Approved</span></td>
                                <td *ngIf="data?.extensionStatus==='REJ'"><span
                                        class="label label-sm label-danger">Rejected</span></td>
                                <td *ngIf="data?.extensionStatus==='UP'"><span
                                        class="label label-sm label-default">Under
                                        Processing</span></td>
                            </tr>
                            <tr class="odd" *ngIf="(!evisaExtension.length) &&(!loading)">
                                <td style="text-align: center" colspan="10" class="dataTables_empty"><b>
                                        {{'RECORDS.NoRecords'|translate}}</b></td>
                            </tr>


                        </tbody>
                    </table>
                </div>
                <div class="row" *ngIf="totalElements>0">

                    <div class="col-md-4 col-sm-12">
                        <div class="btn-group">
                            <ng-select (change)="rangeChanged(pagesize)" [items]="rangeList" bindLabel="name"
                                bindValue="id" placeholder="Select" [(ngModel)]="pagesize"
                                [ngModelOptions]="{standalone: true}" [clearable]='false' [searchable]='false'
                                [dropdownPosition]="'top'">
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <div class="dataTables_info" id="sample_editable_1_info">{{'PAGINATION.Showing'|translate}}
                            {{(number*size) + 1}} {{'PAGINATION.to'|translate}}
                            {{(number*size) + noofelements}} {{'PAGINATION.of'|translate}} {{totalElements}}
                            {{'PAGINATION.entries'|translate}}
                        </div>

                    </div>
                    <div class="col-md-4 col-sm-12">
                        <div class="dataTables_paginate paging_bootstrap">
                            <pagination class="page" [boundaryLinks]="showBoundaryLinks" [rotate]="'true'"
                                [itemsPerPage]='pagesize' name="currentPage" ngDefaultControl [totalItems]="totalItem"
                                [maxSize]="5" [(ngModel)]="currentPage" [ngModelOptions]="{standalone: true}"
                                (pageChanged)="pageChanged($event)" previousText="&lsaquo;" nextText="&rsaquo;"
                                firstText="&laquo;" lastText="&raquo;">
                            </pagination>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ngx-ui-loader hasProgressBar=false fgsType="three-strings"></ngx-ui-loader>