<!-- BEGIN PAGE HEADER-->
<div class="row">
    <div class="col-md-12">
        <!-- BEGIN PAGE TITLE & BREADCRUMB-->
        <h3 class="page-title">
            {{'EMPLOYEE.EmployeeManagement'|translate}}<small> &nbsp;{{'EMPLOYEE.EmployeeBrowse'|translate}} </small>
        </h3>
        <ul class="page-breadcrumb breadcrumb">
            <li>
                <i class="fa fa-home"></i>
                <a [routerLink]="['/main/code-maintenance']"
                    *ngIf="this.getToken('Role')==='ADM'">{{'COMMON.Home'|translate}}</a>
                <a href="javascript:;" *ngIf="this.getToken('Role')==='SBCO' "
                    [routerLink]="['/main/dashboard']">{{'COMMON.Home'|translate}}</a>
                <a href="javascript:;" *ngIf="this.getToken('Role')==='DMM'"
                    [routerLink]="['/main/dashboardimo']">{{'COMMON.Home'|translate}}</a>
                <i class="fa fa-angle-right"></i>
            </li>
            <li>{{'EMPLOYEE.EmployeeManagement'|translate}}<i class="fa fa-angle-right"></i></li>
            <li *ngIf="this.getToken('Role')!='ADM'">{{'EMPLOYEE.ManageEmployee'|translate}}</li>
            <li *ngIf="this.getToken('Role')=='ADM'">{{'SIDEBAR.EmployeeBrowse'|translate}}</li>
        </ul>
        <!-- END PAGE TITLE & BREADCRUMB-->
    </div>
</div>
<!-- END PAGE HEADER-->
<!-- BEGIN DASHBOARD STATS -->
<div class="row">
    <div class="col-md-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet box blue">
            <div class="portlet-title">
                <div class="caption" *ngIf="this.getToken('Role')!='ADM'"><i
                        class="fa fa-edit"></i>{{'EMPLOYEE.ManageEmployee'|translate}}</div>
                <div class="caption" *ngIf="this.getToken('Role')=='ADM'"><i
                        class="fa fa-edit"></i>{{'SIDEBAR.EmployeeBrowse'|translate}}</div>
                <div class="tools">
                    <a href="javascript:;" class="collapse"></a>
                </div>
            </div>
            <div class="portlet-body">
                <div class="table-toolbar">
                    <div class="btn-group">
                        <a [routerLink]="['/main/employee-mgnt/employee-detail','new']"><button class="btn green">
                                {{'COMMON.AddNew'|translate}} <i class="fa fa-plus"></i>
                            </button></a>
                    </div>
                    <div class="col-md-12 col-sm-12">
                        <div class="dataTables_filter" id="sample_editable_1_filter"><label
                                class="col-md">{{'MANAGEUSER.Search'|translate}} :
                                <input class="form-control input-medium pull-right" type="text" id="search-text"
                                    aria-describedby="search-text" (keyup)="onKeySearchUser($event)"
                                    placeholder="{{'MANAGEUSER.UserName'|translate}}" autofocus>
                            </label>
                            <br><br>
                        </div>
                    </div>
                </div>
                <div class="table-scrollable">
                    <table class="table table-striped table-hover table-bordered" id="sample_editable_1">
                        <thead>
                            <tr>
                                <th>{{'MANAGEUSER.UserName'|translate}}</th>
                                <th>{{'MYPROFILE.FullName'|translate}}</th>
                                <th>{{'MYPROFILE.FatherName'|translate}}</th>
                                <th>{{'MANAGEUSER.EmailId'|translate}}</th>
                                <th>{{'MYPROFILE.Role-s'|translate}}</th>
                                <th style="width:150px">{{'MANAGEUSER.AccountActivateDeactivate'|translate}}</th>
                                <th>{{'MANAGEUSER.ResetPassword'|translate}}</th>
                                <th>{{'COMMON.Action'|translate}}</th>

                            </tr>
                        </thead>
                        <tbody>
                            <ngx-ui-loader hasProgressBar=false fgsType="three-strings"></ngx-ui-loader>
                            <tr class="odd gradeX" *ngFor="let data of employeeList">
                                <td>{{data?.username}}</td>
                                <td>{{data?.fullName.toUpperCase()}}</td>
                                <td>{{data?.username.split('.')[1].toUpperCase()}}</td>
                                <td>{{data?.email}}</td>
                                <td *ngIf="data?.role === 'SBCO'">Senior Border Control Officer</td>
                                <td *ngIf="data?.role === 'BCO'">Border Control Officer</td>
                                <td *ngIf="data?.role === 'DMM'">Immigration Officer</td>
                                <td *ngIf="data?.role === 'DM'">Decision Maker</td>
                                <td *ngIf="data?.role === 'ADM'">Administrator</td>
                                <td *ngIf="data?.employementStatus=='Y'"><a href="javascript:;"
                                        (click)="onAcivate(data?.username, data?.employementStatus)">Deactivate</a></td>
                                <td *ngIf="data?.employementStatus=='N'"><a href="javascript:;"
                                        (click)="onAcivate(data?.username)">Activate</a></td>
                                <td><a href="javascript:;" (click)="onResetPassword(data?.username)">Reset Password</a>
                                </td>
                                <td><a href="javascript:;"
                                        [routerLink]="['/main/employee-mgnt/employee-detail/',data?.username]"><i
                                            class="fa fa-pen"></i></a>&nbsp;&nbsp;
                                    <a href="javascript:;"
                                        [routerLink]="['/main/employee-mgnt/employee-view/',data?.username]"><i
                                            class="fa fa-eye"></i></a>
                                </td>

                            </tr>
                            <tr class="odd" *ngIf="(!employeeList?.length) && (!loading)">
                                <td style="text-align: center" colspan="10" class="dataTables_empty"><b>
                                        {{'RECORDS.NoRecords'|translate}}</b>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row" *ngIf='totalItem>0'>
                    <div class="col-md-4 col-sm-12">
                        <div class="btn-group">
                            <ng-select (change)="rangeChanged(pagesize)" [items]="rangeList" bindLabel="name"
                                bindValue="id" placeholder="Select" [(ngModel)]="pagesize"
                                [ngModelOptions]="{standalone: true}" [clearable]='false' [searchable]='false'
                                [dropdownPosition]="'top'">
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <div class="dataTables_info" id="sample_editable_1_info">{{'PAGINATION.Showing'|translate}}
                            {{(number*size) + 1}} {{'PAGINATION.to'|translate}}
                            <!-- {{(number*size) + noofelements}} {{'PAGINATION.of'|translate}} !-->{{totalElements}}
                            {{'PAGINATION.entries'|translate}}
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <div class="dataTables_paginate paging_bootstrap">
                            <pagination class="page" [boundaryLinks]="showBoundaryLinks" [rotate]="'true'"
                                [itemsPerPage]='pagesize' name="currentPage" ngDefaultControl [totalItems]="totalItem"
                                [maxSize]="5" [(ngModel)]="currentPage" [ngModelOptions]="{standalone: true}"
                                (pageChanged)="pageChanged($event)" previousText="&lsaquo;" nextText="&rsaquo;"
                                firstText="&laquo;" lastText="&raquo;">
                            </pagination>
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <!-- END EXAMPLE TABLE PORTLET-->
    </div>
</div>
<!-- END PAGE -->



<ng-template #template1>
    <div class="modal-header">

        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">

        <form class="form-horizontal" #activateForm="ngForm" (ngSubmit)='submitForm(activateForm,formDetails)'>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="control-label col-md-5" *ngIf="employeeStatus">{{statusEmployee}}
                            <span class="required">*</span></label>
                        <label class="control-label col-md-5" *ngIf="!employeeStatus">{{statusEmployee}}
                            <span class="required">*</span></label>
                        <div class="col-md-7">
                            <ng-select [items]="statusChange" class="chosen-select" placeholder="{{statusEmployee}}"
                                [clearable]='false' [searchable]='true' [(ngModel)]="formDetails.reasons" name="reasons"
                                #reasons="ngModel" bindLabel="description" bindValue="code" required>
                            </ng-select>
                            <div class="error-block" *ngIf="((submitted || reasons.touched) && reasons.invalid)">
                                {{'COMMON.ERRORMESSAGES.Required'|translate}}
                            </div>
                        </div>


                    </div>
                </div>
            </div>

            <br>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="control-label col-md-5">{{'POPUP.Remarks'|translate}}
                        </label>
                        <div class="col-md-7">
                            <textarea type="text" class="form-control" id="remarks" name="remarks"
                                placeholder="{{'POPUP.Remarks'|translate}}" [(ngModel)]="formDetails.remarks"
                                #remarks="ngModel" maxlength="255"></textarea>
                        </div>

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn default" data-dismiss="modal"
                    (click)="modalRef.hide()">{{'COMMON.Cancel'|translate}}</button>
                &nbsp; &nbsp;
                <button type="submit" class="btn blue">{{'POPUP.Savechanges'|translate}}</button>
            </div>
        </form>
    </div>




</ng-template>